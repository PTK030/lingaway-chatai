<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatbot do Nauki Języków</title>
    <script src="https://unpkg.com/@hotwired/stimulus@3.2.2/dist/stimulus.umd.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="chat-container" data-controller="language-chatbot">
      <!-- Header -->
      <div class="header">
        <h1>🗣️ Chatbot do Nauki Języków</h1>
        <p>Rozmawiaj z AI w wybranym języku!</p>

        <div class="language-selector">
          <button
            class="language-btn active"
            data-action="click->language-chatbot#setLanguage"
            data-lang="pl-PL"
          >
            🇵🇱 Polski
          </button>
          <button
            class="language-btn"
            data-action="click->language-chatbot#setLanguage"
            data-lang="en-US"
          >
            🇺🇸 English
          </button>
          <button
            class="language-btn"
            data-action="click->language-chatbot#setLanguage"
            data-lang="es-ES"
          >
            🇪🇸 Español
          </button>
          <button
            class="language-btn"
            data-action="click->language-chatbot#setLanguage"
            data-lang="fr-FR"
          >
            🇫🇷 Français
          </button>
          <button
            class="language-btn"
            data-action="click->language-chatbot#setLanguage"
            data-lang="de-DE"
          >
            🇩🇪 Deutsch
          </button>
        </div>
      </div>

      <!-- API Setup -->
      <div class="api-setup" data-language-chatbot-target="apiSetup">
        <h3>🔑 Konfiguracja API</h3>
        <p>
          Aby korzystać z chatbota, potrzebujesz darmowego klucza API z Hugging
          Face:
        </p>
        <ol>
          <li>
            Idź na
            <a href="https://huggingface.co/join" target="_blank"
              >huggingface.co</a
            >
            i załóż darmowe konto
          </li>
          <li>
            Przejdź do
            <a href="https://huggingface.co/settings/tokens" target="_blank"
              >Settings → Access Tokens</a
            >
          </li>
          <li>Utwórz nowy token i skopiuj go poniżej:</li>
        </ol>
        <input
          type="password"
          placeholder="Wklej swój Hugging Face API token..."
          data-language-chatbot-target="apiInput"
        />
        <button data-action="click->language-chatbot#saveApiKey">
          Zapisz klucz API
        </button>
      </div>

      <!-- Chat Messages -->
      <div class="chat-messages" data-language-chatbot-target="messages">
        <div class="message bot">
          <div class="avatar">🤖</div>
          <div class="message-content">
            Cześć! Jestem Twoim asystentem do nauki języków. Wybierz język i
            zacznij rozmawiać ze mną! Pamiętaj, że potrzebujesz mikrofonu i
            klucza API Hugging Face.
          </div>
        </div>
      </div>

      <!-- Loading indicator -->
      <div class="loading" data-language-chatbot-target="loading">
        <div class="spinner"></div>
        <p>Przetwarzam odpowiedź...</p>
      </div>

      <!-- Controls -->
      <div class="controls">
        <button
          class="mic-button disabled"
          data-language-chatbot-target="micButton"
          data-action="click->language-chatbot#toggleRecording"
        >
          🎤
        </button>
        <div class="status" data-language-chatbot-target="status">
          Skonfiguruj API, aby rozpocząć
        </div>
        <button
          class="clear-button"
          data-action="click->language-chatbot#clearChat"
        >
          🗑️ Wyczyść
        </button>
      </div>
    </div>

    <script src="script.js" type="module"></script>
  </body>
</html>
